/*
* fadeslide
* By: James Player, http://springload.co.nz
* Version: 1.0
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

(function(b){var a={init:function(c){var d=b.extend({selectedSlide:1,containerClass:"fs_container",slideClass:"fs_slide",nextClass:"fs_next",prevClass:"fs_prev",slideSpeed:1000,slideEasing:"linear",autoSlide:true,slideInterval:5000},c);return this.each(function(){var g=b(this);var f=g.data("fadeslide");if(!f){g.data("fadeslide",{});var f=g.data("fadeslide");f.container=b(this).find("."+d.containerClass);f.slides=g.find("."+d.slideClass);f.next=b("."+d.nextClass);f.prev=b("."+d.prevClass);f.selectedSlide=d.selectedSlide;f.total_items=f.slides.length+4;g.css({position:"relative",overflow:"hidden"});f.slides.css({"float":"left",opacity:"0.5"});f.slide_width=f.slides.outerWidth();f.container_width=f.slide_width*f.total_items;f.locked=false;f.slideSpeed=d.slideSpeed;f.slideEasing=d.slideEasing;f.autoSlide=d.autoSlide;f.slideInterval=d.slideInterval;f.slides.eq(0).clone().appendTo(f.container);f.slides.eq(1).clone().appendTo(f.container);f.slides.eq(f.slides.length-1).clone().prependTo(f.container);f.slides.eq(f.slides.length-2).clone().prependTo(f.container);f.slides=b(this).find("."+d.slideClass);f.container.css({position:"absolute",left:"50%",top:"0",width:(f.container_width)+"px"});f.slides.eq(f.selectedSlide+1).css({opacity:"1"});g.fadeslide("reset");g.fadeslide("clickInit");if(f.autoSlide){function e(){f.timer=setTimeout(function(){g.fadeslide("slide","next");e()},f.slideInterval)}e();f.container.hover(function(){clearTimeout(f.timer)});f.next.add(f.prev).click(function(){clearTimeout(f.timer)})}f.next.add(f.prev).click(function(){var h=b(this).hasClass(d.prevClass)?"prev":"next";g.fadeslide("slide",h);return false})}})},reset:function(){return this.each(function(){var c=b(this).data("fadeslide");c.container.css({marginLeft:"-"+((c.selectedSlide+1)*c.slide_width)-(c.slide_width/2)+"px"})})},slide:function(c){return this.each(function(){var g=b(this);var f=g.data("fadeslide");if(f.locked){return}f.locked=true;var e=false;var d=false;switch(c){case"prev":f.selectedSlide-=1;if(f.selectedSlide<1){e=true}break;case"next":f.selectedSlide+=1;if(f.selectedSlide==(f.slides.length-3)){d=true}break}f.slides.animate({opacity:"0.5"},500);f.container.animate({marginLeft:"-"+((f.selectedSlide+1)*f.slide_width)-(f.slide_width/2)+"px"},f.slideSpeed,f.slideEasing,function(){if(e){f.selectedSlide=f.slides.length-4;g.fadeslide("reset")}if(d){f.selectedSlide=1;g.fadeslide("reset")}f.slides.eq(f.selectedSlide+1).animate({opacity:"1"},"500","swing",function(){f.locked=false;g.fadeslide("clickInit")})})})},clickInit:function(){return this.each(function(){var c=b(this).data("fadeslide");var d=b(this);c.slides.unbind("click");c.slides.eq(c.selectedSlide+2).click(function(){d.fadeslide("slide","next");return false});c.slides.eq(c.selectedSlide).click(function(){d.fadeslide("slide","prev");return false})})}};b.fn.fadeslide=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.fadeslide")}}}})(jQuery);